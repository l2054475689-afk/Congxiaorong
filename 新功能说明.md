# 新功能说明 - 副本系统 & 励志库

## 📅 更新日期
2025年11月9日

## ✨ 新增功能

### 1. 境界-副本模块 🎮

**功能位置**: 境界系统 → 副本标签页

**功能描述**:
- 在境界系统中新增《副本》标签页，与功法、秘术并列
- 副本类似游戏中的挑战任务，可以添加各种挑战目标
- 完成副本节点可以获得更高的奖励

**使用方法**:
1. 进入"境界"页面
2. 切换到"副本"标签页
3. 点击"添加副本"按钮
4. 输入副本名称，例如："100天读书挑战"
5. 输入挑战节点（逗号分隔），例如："第1天,第10天,第30天,第100天"
6. 保存后即可开始挑战

**奖励设定**:
- ✅ 完成副本节点：心境 +3，血量 +2
- ✅ 比秘术奖励更高（秘术：心境+2，血量+0）
- ✅ 比功法奖励更高（功法：心境+1，血量+1）

**示例副本**:
- 📚 100天读书挑战：第1天,第10天,第30天,第60天,第100天
- 💪 100个俯卧撑：20个,40个,60个,80个,100个
- 🏃 跑步1000公里：100公里,300公里,500公里,800公里,1000公里
- 💻 编程打卡：第1周,第1月,第3月,第6月,第1年

---

### 2. 励志库系统 📖

**功能位置**: 底部导航 → 励志

**功能描述**:
- 全新的励志语录管理系统
- 可以添加、查看、删除励志诗句和名言
- 每次启动应用时随机弹出一条励志语录激励自己

**默认诗句**（已预置10条）:
1. 大鹏一日同风起，扶摇直上九万里 —— 李白
2. 天行健，君子以自强不息 —— 周易
3. 不经一番寒彻骨，怎得梅花扑鼻香 —— 黄蘗禅师
4. 长风破浪会有时，直挂云帆济沧海 —— 李白
5. 千磨万击还坚劲，任尔东西南北风 —— 郑板桥
6. 路漫漫其修远兮，吾将上下而求索 —— 屈原
7. 宝剑锋从磨砺出，梅花香自苦寒来 —— 古诗
8. 莫愁前路无知己，天下谁人不识君 —— 高适
9. 会当凌绝顶，一览众山小 —— 杜甫
10. 天生我材必有用，千金散尽还复来 —— 李白

**使用方法**:

**查看和管理**:
1. 点击底部导航栏的"励志"图标
2. 查看所有已添加的励志语录
3. 点击删除按钮可以删除不需要的语录

**添加新语录**:
1. 进入励志库页面
2. 点击"添加励志语录"按钮
3. 输入励志诗句/名言内容
4. 输入作者名称（可选）
5. 保存即可

**启动弹窗**:
- 每次启动应用时，会自动随机显示一条励志语录
- 弹窗标题："今日励志" 🌞
- 点击"开始今日修炼"关闭弹窗

---

## 🔧 技术实现

### 数据库变更
1. **新增表**: `励志库`
   - id: 主键
   - content: 语录内容
   - author: 作者
   - category: 分类（默认poetry）
   - created_at: 创建时间
   - status: 状态（1=启用，0=删除）

2. **境界系统数据扩展**:
   - 在 `jingjie_config` 表的JSON数据中新增 `fuben` 字段
   - 存储格式与 `secret_arts` 相同

### 代码变更

**新增文件**:
- `systems/lizhi.py` - 励志库管理系统（完整的CRUD）

**修改文件**:
1. `database/db_manager.py`
   - 添加励志库表创建SQL
   - 添加10条默认励志语录
   - 添加励志库CRUD方法（get_all_quotes, get_random_quote, add_quote, delete_quote）

2. `systems/jingjie.py`
   - 在 `_realm_data` 中添加 `fuben` 字段
   - 添加副本标签页（图标：SPORTS_ESPORTS）
   - 添加副本相关方法（15个新方法）

3. `ui/main_window.py`
   - 导入 LizhiSystem
   - 添加励志库导航（图标：FORMAT_QUOTE）
   - 添加 show_lizhi() 方法
   - 在 setup() 中调用启动弹窗

---

## 📱 界面变化

### 底部导航栏（7个图标）:
1. 面板 🏠
2. 心境 🧘
3. 境界 📖
4. 灵石 💎
5. 统御 👥
6. **励志 💭** ← 新增
7. 设置 ⚙️

### 境界系统（3个标签页）:
1. 功法
2. 秘术
3. **副本 🎮** ← 新增

---

## 🎯 使用示例

### 创建副本挑战示例

**健身挑战**:
```
名称：30天健身打卡
节点：第1天,第7天,第14天,第21天,第30天
```

**学习挑战**:
```
名称：精通Python
节点：基础语法,数据结构,面向对象,并发编程,项目实战
```

**习惯养成**:
```
名称：早起挑战
节点：第1天,坚持1周,坚持2周,坚持1月,坚持3月
```

### 添加励志语录示例

**古诗词**:
```
内容：天将降大任于斯人也，必先苦其心志，劳其筋骨
作者：孟子
```

**现代名言**:
```
内容：成功不是将来才有的，而是从决定去做的那一刻起，持续累积而成
作者：罗伯特·清崎
```

**英文名言**:
```
内容：The only way to do great work is to love what you do.
作者：Steve Jobs
```

---

## ✅ 功能测试清单

### 副本系统:
- [x] 可以添加新副本
- [x] 可以设置副本节点
- [x] 可以勾选完成节点
- [x] 完成节点后增加心境和血量
- [x] 显示副本完成进度
- [x] 副本数据持久化保存

### 励志库系统:
- [x] 可以查看所有语录
- [x] 可以添加新语录
- [x] 可以删除语录
- [x] 启动时随机弹出语录
- [x] 语录数据持久化保存
- [x] 默认10条语录已预置

---

## 🚀 后续优化建议

### 副本系统:
1. 添加副本难度设置（简单/普通/困难）
2. 根据难度调整奖励倍数
3. 添加副本完成统计
4. 支持副本重置功能
5. 添加副本模板库

### 励志库系统:
1. 支持语录分类（诗词/名言/自定义）
2. 添加语录收藏功能
3. 支持语录分享
4. 添加每日一句推送
5. 支持从网络导入语录

---

## 📝 注意事项

1. **数据库兼容性**: 新增功能会自动创建励志库表，不影响现有数据
2. **副本数据**: 保存在境界系统的JSON配置中，与秘术数据结构相同
3. **启动弹窗**: 仅在有语录数据时显示，如果数据库为空则不弹窗
4. **导航栏**: 增加励志库后共7个导航项，移动端可能需要调整图标大小

---

## 🎉 功能特点

### 副本系统:
- ✨ 游戏化的挑战任务
- 🎯 更高的奖励激励
- 📊 清晰的进度展示
- 🔄 灵活的节点设置
- 💪 培养持续行动力

### 励志库系统:
- 💡 每日正能量注入
- 📚 个性化语录库
- 🎲 随机惊喜体验
- ✍️ 自由添加管理
- 🌟 启动激励氛围

---

**更新完成！** 🎊

现在你可以：
1. 在境界页面创建副本挑战
2. 在励志页面管理励志语录
3. 享受每次启动的励志弹窗

祝你修炼愉快！ 🚀
