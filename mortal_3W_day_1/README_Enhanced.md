# 凡人修仙3w天 - 增强版 v3.0

🌟 **第三阶段：优化提升版本**

一款游戏化的个人生命管理应用，通过修仙概念将人生管理转化为30,000天的修炼之旅。

## ✨ 新功能特性

### 📊 报告导出功能
- **多格式支持**: PDF、Excel、Markdown
- **报告类型**: 日报、周报、月报、年报
- **自定义报告**: 可选择时间段和数据维度
- **精美排版**: 专业的报告模板和图表

### 💾 数据备份与恢复
- **自动备份**: 每日凌晨2点自动备份
- **手动备份**: 随时创建备份点
- **智能恢复**: 支持完整恢复和部分恢复
- **备份管理**: 自动清理过期备份文件

### 🎨 UI美化优化
- **精美渐变**: 多种渐变色彩方案
- **卡片设计**: 现代化的卡片布局
- **动画效果**: 流畅的界面动画过渡
- **主题系统**: 浅色、深色、修仙主题

### 📈 数据可视化
- **折线图**: 心境趋势、血量变化
- **柱状图**: 财务收支对比
- **饼图**: 任务分类统计
- **进度环**: 修炼进度展示

### 📐 布局改善
- **响应式设计**: 适配不同屏幕尺寸
- **排版系统**: 统一的字体层次和间距
- **网格布局**: 灵活的组件排列
- **组件化**: 可复用的UI组件

### ⚡ 性能优化
- **内存监控**: 实时监控内存使用
- **缓存系统**: 智能数据缓存
- **批处理**: 优化大量数据操作
- **虚拟滚动**: 大列表渲染优化

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Windows 10+ / macOS 10.14+ / Linux

### 安装依赖
```bash
cd mortal_3W_day_1
pip install -r requirements.txt
```

### 运行应用
```bash
# 增强版启动脚本
python run_enhanced.py

# 或使用标准版
python main.py
```

## 📖 使用指南

### 主要界面

#### 🏠 个人面板
- **生命倒计时**: 显示剩余生命天数
- **状态概览**: 心境、灵石、境界一览
- **数据趋势**: 7日心境和财务趋势图
- **今日任务**: 当日修炼任务列表
- **快速操作**: 导出报告、备份数据等

#### 🧘 心境系统
- **心境等级**: 从"心魔入体"到"逍遥自在"
- **影响因素**: 正面和负面行为记录
- **趋势分析**: 心境变化图表
- **AI评估**: 智能评估突发事件影响

#### 📚 境界系统
- **技能树**: 心法、功法、秘术分类
- **进度跟踪**: 完成百分比显示
- **境界等级**: 练气期到化神期
- **自定义技能**: 可添加个人技能

#### 💰 灵石系统
- **财务管理**: 收入支出记录
- **目标追踪**: 500万灵石目标
- **统计报表**: 收支分析图表
- **资产趋势**: 财富增长曲线

#### ⚙️ 设置中心
- **AI接口**: 多平台AI接口配置
- **备份设置**: 自动备份策略
- **主题切换**: 多种视觉主题
- **数据管理**: 导入导出功能

### 高级功能

#### 📊 报告导出
1. 点击"导出报告"按钮
2. 选择报告类型（日/周/月/年）
3. 选择导出格式（PDF/Excel/Markdown）
4. 报告自动保存到 `exports/` 目录

#### 💾 数据备份
1. **自动备份**: 无需操作，每日自动执行
2. **手动备份**: 设置 → 数据管理 → 创建备份
3. **恢复数据**: 设置 → 数据管理 → 恢复备份
4. **备份管理**: 查看和删除备份文件

#### ⚡ 性能监控
- 查看内存使用情况
- 监控缓存命中率
- 分析函数执行时间
- 生成性能报告

## 🎯 进阶技巧

### 快捷键
- `Ctrl + N`: 添加新任务
- `Ctrl + B`: 创建备份
- `Ctrl + E`: 导出报告
- `Ctrl + R`: 刷新数据

### 自定义配置
编辑 `config.py` 文件自定义：
- 窗口大小和主题
- 默认目标金额
- 心境等级范围
- 界面颜色方案

### API集成
支持多种AI平台：
- OpenAI (ChatGPT)
- 通义千问 (阿里云)
- 文心一言 (百度)
- ChatGLM (智谱)
- 自定义API端点

## 📁 项目结构

```
mortal_3W_day_1/
├── 🚀 run_enhanced.py          # 增强版启动脚本
├── 📄 main.py                  # 标准版启动脚本
├── ⚙️ config.py               # 配置文件
├── 📋 requirements.txt         # 依赖包列表
├── 📖 README_Enhanced.md       # 使用说明
├── 🗄️ database/               # 数据库模块
│   ├── db_manager.py          # 数据库管理
│   └── models.py              # 数据模型
├── 🏗️ systems/                # 业务系统
│   ├── panel.py               # 个人面板
│   ├── xinjing.py             # 心境系统
│   ├── jingjie.py             # 境界系统
│   ├── lingshi.py             # 灵石系统
│   └── settings.py            # 设置系统
├── 🎨 ui/                     # 用户界面
│   ├── enhanced_main_window.py # 增强版主窗口
│   ├── enhanced_styles.py     # 增强样式系统
│   ├── charts.py              # 图表组件
│   ├── layout_system.py       # 布局系统
│   └── task_widgets.py        # 任务组件
├── 🛠️ utils/                  # 工具模块
│   ├── export.py              # 报告导出
│   ├── backup.py              # 数据备份
│   └── performance.py         # 性能优化
├── 📊 exports/                # 导出文件目录
├── 💾 backups/                # 备份文件目录
└── 🎯 assets/                 # 资源文件
    └── initial_tasks.json     # 初始任务模板
```

## 🐛 故障排除

### 常见问题

#### 1. 启动失败
- 检查Python版本 (≥3.8)
- 安装所有依赖: `pip install -r requirements.txt`
- 确保当前目录在 `mortal_3W_day_1/`

#### 2. 数据库错误
- 删除 `immortal_cultivation.db` 文件重新初始化
- 检查文件权限
- 从备份恢复数据

#### 3. 报告导出失败
- 安装 ReportLab: `pip install reportlab`
- 安装 pandas: `pip install pandas openpyxl`
- 检查 exports 目录权限

#### 4. 性能问题
- 关闭不必要的程序释放内存
- 清理过期备份文件
- 重启应用刷新缓存

### 日志分析
查看日志文件 `enhanced_app.log` 获取详细错误信息。

## 🔧 开发者信息

### 版本历史
- **v1.0**: MVP基础版本
- **v2.0**: 功能完善版本
- **v3.0**: 优化提升版本 ⭐

### 技术栈
- **UI框架**: Flet (Flutter-based)
- **数据库**: SQLite + SQLAlchemy
- **图表**: Flet内置图表组件
- **报告**: ReportLab + pandas
- **监控**: psutil + threading

### 贡献指南
1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

## 📞 支持与反馈

- 📧 邮箱: [your-email@example.com]
- 💬 讨论: GitHub Issues
- 📖 文档: 项目 Wiki

---

**享受您的修仙之旅！** 🌟

> "道可道，非常道。名可名，非常名。" —— 愿您在30,000天的人生修炼中，找到属于自己的道路。 